# 锁  

## 序言  
本文主要是以个人的理解，概括性地从应用层面介绍锁，对于底层实现，不会过多地深入讨论。

##1.什么是锁
在编程的世界的锁，顾名思义，可以理解为现实中的锁，用于对资源的锁定。锁定的资源可以是一段代码，一个对象，或者是数据库中的数据等。  

锁的原则：  
1.对于被锁定的资源，在同一时间，只允许一个线程的访问或修改。
2.锁资源必须要遵守，有锁定就有释放，谁锁定谁释放，锁定次数等于释放次数的原则。 

锁的作用：  
对于线程共享的资源，访问或修改资源时，对资源上锁，可以保证资源一致性，比如，账户余额为10元，进行扣除一元操作后，保证余额必须9元。  
如果不对余额进行锁定，多线程操作共享账户余额，会造成扣除一元，余额还剩10元的情况。
  
##2.锁的分类
在不同的应用角度，锁可以有多种分类。比如一个男人，在家庭角度中，扮演的角色可以是儿子，父亲，兄弟，在社会角度中，扮演的角色可以是市民、员工等。  
参考[锁的分类介绍](https://zhuanlan.zhihu.com/p/71156910)有详细的介绍。  
###2.1 乐观锁、悲观锁  
从执行策略角度，锁可以分为乐观锁、悲观锁  
乐观锁：  
悲观锁：  
###2.2 偏向锁、轻量级锁、重量级锁  
从加锁状态角度，锁分为偏向锁、轻量级锁、重量级锁  
偏向锁：  
轻量级锁：  
重量级锁：  
###2.3 可重入锁（递归锁）  
从重复获取锁的角度，锁为可重入锁（递归锁），不可重入锁  
可重入锁：  
不可重入锁：  
###2.4 互斥锁（排它锁）、共享锁  
从资源共享的角度，锁分为互斥锁（排它锁）、共享锁  
互斥锁：  
共享锁：  
###2.5 读写锁
从操作资源的角度，锁分为读锁、写锁  
读锁：  
写锁：  
###2.6 公平锁、非公平锁
从锁获取顺序的角度，锁分为公平锁、非公平锁  
公平锁：  
非公平锁：  
###2.7 隐式锁、显式锁
从锁代码实现的角度，锁分为隐式锁、显式锁  
隐式锁：  
隐式锁： 
###2.8 分布式锁
从服务器部署的角度，锁分为分布式锁、非分布式锁  
分布式锁：  
非分布式锁：  

##3.Java中的锁
###3.1 synchronized  
###3.2 ReentrantLock  
###3.3 ReentrantReadWriteLock  
###3.4 CAS  

##4.分布式锁的实现  
1.Redis  
2.Zookeeper  

##5.Mysql中的锁
